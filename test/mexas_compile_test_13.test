// MEXAS Compile Test 13 Input
//
// File:        mexas_compile_test_13.mex
// Author:      Bob Walton (walton@acm.org)
// Date:        Fri Jan 17 08:59:58 AM EST 2025
//
// The authors have placed this program in the public
// domain; they make no warranty and accept no liability
// for this program.
// MEXAS Time Test

// Empty stack test
//
PUSHI 100
    [14:0;1] PUSHI T_PUSH 0 0 0 100; *
TEST_INSTRUCTION ADD  // stack too small
    [15:1;1] ADD T_AOP 0 0 0
TEST_INSTRUCTION JMP  // immedC = 0
    [16:2;1] JMP T_JMP 0 0 0
PUSHI "HELLO"
    [17:3;2] PUSHI T_PUSH 0 0 0 "HELLO"; *
TEST_INSTRUCTION JMPGEQ 0 0 1 // invalid arg
    [18:4;2] JMPGEQ T_JMPS 0 0 1
TEST_INSTRUCTION JMP 100 0 1 // immedA too large
    [19:5;2] JMP T_JMP 100 0 1
TEST_INSTRUCTION JMP 0 0 1000000 // immedC too large
    [20:6;2] JMP T_JMP 0 0 1000000
PUSHI +INF
    [21:7;3] PUSHI T_PUSH 0 0 0 inf; *
TEST_INSTRUCTION JMPCNT 0 0 1 1 // INF count
    [22:8;3] JMPCNT T_JMPS 0 0 1 1
PUSHI 5
    [23:9;4] PUSHI T_PUSH 0 0 0 5; *
TEST_INSTRUCTION JMPCNT 0 0 1 // immedD <= 0
    [24:10;4] JMPCNT T_JMPS 0 0 1
* {14:0,1,1} PUSHI: * <= 100

!!! FATAL PROGRAM FORMAT ERROR:
    illegal SP: stack too small for instruction
    PC->MODULE = mexas_compile_test_13.mex
* {15:1,1,2} ADD AOP 0 0 0 *MISSING*
SKIPPING INSTRUCTION AND CONTINUING BECAUSE PROCESS->TEST == 100 > 0

!!! FATAL PROGRAM FORMAT ERROR:
    JMP immedC == 0; illegal
    PC->MODULE = mexas_compile_test_13.mex
* {16:2,1,3} JMP JMP 0 0 0 *MISSING*
SKIPPING INSTRUCTION AND CONTINUING BECAUSE PROCESS->TEST == 99 > 0
* {17:3,2,4} PUSHI: * <= "HELLO"

!!! FATAL ERROR:  invalid operands to a conditional jump instruction
* {18:4,0,5} JMPGEQ location 5 with invalid operand(s)
             ARGS = 100 "HELLO"
TREATING JMP AS UNSUCCESSFUL AND CONTINUING BECAUSE PROCESS->TEST == 98
    > 0

!!! FATAL PROGRAM FORMAT ERROR:
    JMP immedA is greater than stack size
    PC->MODULE = mexas_compile_test_13.mex
* {19:5,0,6} JMP JMP 100 0 1 *MISSING*
SKIPPING INSTRUCTION AND CONTINUING BECAUSE PROCESS->TEST == 97 > 0

!!! FATAL PROGRAM FORMAT ERROR:
    JMP immedC too large; target is beyond module end
    PC->MODULE = mexas_compile_test_13.mex
* {20:6,0,7} JMP JMP 0 0 1000000 *MISSING*
SKIPPING INSTRUCTION AND CONTINUING BECAUSE PROCESS->TEST == 96 > 0
* {21:7,1,8} PUSHI: * <= inf

!!! FATAL ERROR:  invalid operands to a conditional jump instruction
* {22:8,1,9} JMPCNT location 9 with invalid operand(s)
             ARGS = inf 1
TREATING JMP AS UNSUCCESSFUL AND CONTINUING BECAUSE PROCESS->TEST == 95
    > 0
* {23:9,2,10} PUSHI: * <= 5

!!! FATAL PROGRAM FORMAT ERROR:
    JMPCNT immedD is not a finite number > 0
    PC->MODULE = mexas_compile_test_13.mex
* {24:10,2,11} JMPCNT JMPS 0 0 1 *MISSING*
    ARGS = 5 *MISSING*
SKIPPING INSTRUCTION AND CONTINUING BECAUSE PROCESS->TEST == 94 > 0
mexas_compile_test_13.mex successfully compiled
