Compile module and dump instructions

// MEXAS Compile Test 1 Input
//
// File:        mexas_compile_test_1.in
// Author:      Bob Walton (walton@acm.org)
// Date:        Fri Aug  4 17:21:54 EDT 2023
//
// The authors have placed this program in the public
// domain; they make no warranty and accept no liability
// for this program.

// PUSH, POP, ARITHMETIC OP TEST
//
PUSHI 2 X
    [####]PUSHI T_PUSH 0 0 0 2; X
PUSHI 2 Y
    [####]PUSHI T_PUSH 0 0 0 2; Y
    STACKS: VARIABLES: Y X
ADD Z
    [####]ADD T_AOP 0 0 0 [$ MISSING $]; Z
    STACKS: VARIABLES: Z
ERROR: in line ####: variable named X not defined; instruction changed to
       PUSHI missing value:
PUSH X
PUSH X
    [####]PUSHI T_PUSH 0 0 0 [$ MISSING $]; [$ MISSING $]
POP
    [####]POPS T_POP 0 0 0 [$ MISSING $]; [< * X >]
ERROR: in line ####: portion of stack in the current block is too little
       to pop required arguments; instruction ignored:
ADD
PUSH Z W
    [####]PUSHS T_PUSH 0 0 0 [$ MISSING $]; [< Z W >]
SUB
    [####]SUB T_AOP 0 0 0 [$ MISSING $]; *
    STACKS: VARIABLES: *
POP
    [####]POPS T_POP 0 0 0 [$ MISSING $]; [< * * >]
    STACKS: VARIABLES:
// JMP TEST 1
// Z = MIN ( X, Y )
//
PUSHI 5 X
    [####]PUSHI T_PUSH 0 0 0 5; X
PUSHI 23 Y
    [####]PUSHI T_PUSH 0 0 0 23; Y
PUSHI NaN Z
    [####]PUSHI T_PUSH 0 0 0 nan; Z
    STACKS: VARIABLES: Z Y X
PUSH X
    [####]PUSHS T_PUSH 2 0 0 [$ MISSING $]; [< X X >]
PUSH Y
    [####]PUSHS T_PUSH 2 0 0 [$ MISSING $]; [< Y Y >]
    STACKS: VARIABLES: Y X Z Y X
JMPLT ITS-X
    [####]JMPLT T_JMPS 0 0 0 [$ MISSING $]; ITS-X
PUSH Y
    [####]PUSHS T_PUSH 1 0 0 [$ MISSING $]; [< Y Y >]
POP Z
    [####]POPS T_POP 1 0 0 [$ MISSING $]; [< Z Y >]
JMP DONE
    [####]JMP T_JMP 0 0 0 [$ MISSING $]; DONE
LABEL ITS-X
    [####]JMPLT T_JMPS 0 0 4 [$ MISSING $]; ITS-X
PUSH X
    [####]PUSHS T_PUSH 2 0 0 [$ MISSING $]; [< X X >]
POP Z
    [####]POPS T_POP 1 0 0 [$ MISSING $]; [< Z X >]
LABEL DONE
    [####]JMP T_JMP 0 0 3 [$ MISSING $]; DONE
    STACKS: VARIABLES: Z Y X
POP
    [####]POPS T_POP 0 0 0 [$ MISSING $]; [< * Z >]
// JMP TEST 2
// Z = MIN ( X, Y )
//
    STACKS: VARIABLES: Y X
PUSH X Z
    [####]PUSHS T_PUSH 1 0 0 [$ MISSING $]; [< X Z >]
PUSH X
    [####]PUSHS T_PUSH 2 0 0 [$ MISSING $]; [< X X >]
PUSH Y
    [####]PUSHS T_PUSH 2 0 0 [$ MISSING $]; [< Y Y >]
JMPLT ITS-X
    [####]JMPLT T_JMPS 0 0 0 [$ MISSING $]; ITS-X
POP
    [####]POPS T_POP 0 0 0 [$ MISSING $]; [< * Z >]
PUSH Y Z
    [####]PUSHS T_PUSH 0 0 0 [$ MISSING $]; [< Y Z >]
LABEL ITS-X
    [####]JMPLT T_JMPS 0 0 3 [$ MISSING $]; ITS-X
POP
    [####]POPS T_POP 0 0 0 [$ MISSING $]; [< * Z >]
// JMP TEST 3
// Z = MIN ( X, Y )
// Z pushed into stack by code jumped over
//
    STACKS: VARIABLES: Y X
PUSH X
    [####]PUSHS T_PUSH 1 0 0 [$ MISSING $]; [< X X >]
PUSH Y
    [####]PUSHS T_PUSH 1 0 0 [$ MISSING $]; [< Y Y >]
JMPLT ITS-X
    [####]JMPLT T_JMPS 0 0 0 [$ MISSING $]; ITS-X
PUSH Y Z
    [####]PUSHS T_PUSH 0 0 0 [$ MISSING $]; [< Y Z >]
JMP DONE
    [####]JMP T_JMP 0 0 0 [$ MISSING $]; DONE
LABEL ITS-X
ERROR: in line ####: code jumped over pushes values into the stack; JMP
       unresolved:
JMPLT ITS-X
PUSH X Z
    [####]PUSHS T_PUSH 2 0 0 [$ MISSING $]; [< X Z >]
LABEL DONE
ERROR: in line ####: code jumped over pushes values into the stack; JMP
       unresolved:
JMP DONE
    STACKS: VARIABLES: Z Z Y X
POP
    [####]POPS T_POP 0 0 0 [$ MISSING $]; [< * Z >]
POP
    [####]POPS T_POP 0 0 0 [$ MISSING $]; [< * Z >]
// JMP TEST 4
// Z = MIN ( X, Y )
// Z popped from stack by code jumped over
//
    STACKS: VARIABLES: Y X
PUSH X
    [####]PUSHS T_PUSH 1 0 0 [$ MISSING $]; [< X X >]
PUSH Y
    [####]PUSHS T_PUSH 1 0 0 [$ MISSING $]; [< Y Y >]
PUSH Y Z
    [####]PUSHS T_PUSH 0 0 0 [$ MISSING $]; [< Y Z >]
PUSH X Z
    [####]PUSHS T_PUSH 2 0 0 [$ MISSING $]; [< X Z >]
JMPLT ITS-X
    [####]JMPLT T_JMPS 0 0 0 [$ MISSING $]; ITS-X
POP
    [####]POPS T_POP 0 0 0 [$ MISSING $]; [< * Y >]
LABEL ITS-X
ERROR: in line ####: code jumped over pops values from the stack; JMP
       unresolved:
JMPLT ITS-X
    STACKS: VARIABLES: X Y X
POP
    [####]POPS T_POP 0 0 0 [$ MISSING $]; [< * X >]
Compile returned true
