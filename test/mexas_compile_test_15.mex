// MEXAS Compile Test 15 Input
//
// File:	mexas_compile_test_15.mex
// Author:	Bob Walton (walton@acm.org)
// Date:	Fri Dec 13 06:31:12 PM EST 2024
//
// The authors have placed this program in the public
// domain; they make no warranty and accept no liability
// for this program.

// JMP Optimize Test
//
SET_TRACE SET_OPTIMIZE NOP

BEGF JMP-2ARG-TEST
    PUSHI 1
    PUSHI 2
    JMPEQ BAD
    JMP GOOD
    LABEL BAD
    TRACE 'JMPEQ: WRONG JMP'
    LABEL GOOD

    PUSHI 1
    PUSHI 1
    JMPEQ GOOD
    TRACE 'JMPEQ: WRONG NO-JMP'
    LABEL GOOD

    PUSHI 1
    PUSHI 2
    JMPNEQ GOOD
    TRACE 'JMPNEQ: WRONG NO-JMP'
    LABEL GOOD

    PUSHI 1
    PUSHI 1
    JMPNEQ BAD
    JMP GOOD
    LABEL BAD
    TRACE 'JMPNEQ: WRONG JMP'
    LABEL GOOD

    PUSHI -10
    PUSHI 0
    JMPGEQ * BAD1
    PUSHI +10
    JMPGEQ BAD2
    JMP GOOD
    LABEL BAD1
    TRACE 'JMPGEQ *: WRONG JMP'
    JMP GOOD
    LABEL BAD2
    TRACE 'JMPGEQ: WRONG JMP'
    LABEL GOOD

    PUSHI -10
    PUSHI -15
    JMPGEQ * GOOD
    PUSHI +10
    JMPGEQ BAD
    JMP GOOD
    LABEL BAD
    TRACE 'JMPGEQ: WRONG JMP'
    JMP GOOD

    PUSHI -10
    PUSHI +15
    JMPGEQ * BAD
    PUSHI +10
    JMPGEQ GOOD
    TRACE 'JMPGEQ: WRONG NO-JMP'
    JMP GOOD
    LABEL BAD
    TRACE 'JMPGEQ *: WRONG JMP'
    JMP GOOD

    PUSHI 1
    PUSHI 1
    JMPGT BAD
    JMP GOOD
    LABEL BAD
    TRACE 'JMPGT: WRONG JMP'
    LABEL GOOD

    PUSHI 1
    PUSHI -1
    JMPGT GOOD
    TRACE 'JMPGT: WRONG NO-JMP'
    LABEL GOOD

    PUSHI 1
    PUSHI 1
    JMPLT BAD
    JMP GOOD
    LABEL BAD
    TRACE 'JMPLT: WRONG JMP'
    LABEL GOOD

    PUSHI -1
    PUSHI 1
    JMPLT GOOD
    TRACE 'JMPLT: WRONG NO-JMP'
    LABEL GOOD

    PUSHI 1
    PUSHI 0
    JMPLEQ BAD
    JMP GOOD
    LABEL BAD
    TRACE 'JMPLEQ: WRONG JMP'
    LABEL GOOD

    PUSHI 0
    PUSHI 0
    JMPLEQ GOOD
    TRACE 'JMPLEQ: WRONG NO-JMP'
    LABEL GOOD


    NOP 'Only Traced if Optimize is OFF'
ENDF

SET_OPTIMIZE OFF
CALL JMP-2ARG-TEST 0
SET_OPTIMIZE ON
CALL JMP-2ARG-TEST 0

BEGF JMP-1ARG-TEST

    PUSHI FALSE
    JMPFALSE GOOD
    TRACE 'JMPFALSE: WRONG NO-JMP'
    LABEL GOOD

    PUSHI TRUE
    JMPFALSE BAD
    JMP GOOD
    LABEL BAD
    TRACE 'JMPFALSE: WRONG JMP'
    LABEL GOOD

    PUSHI NONE
    JMPFALSE BAD
    JMP GOOD
    LABEL BAD
    TRACE 'JMPFALSE: WRONG JMP'
    LABEL GOOD

    PUSHOBJ
    JMPFALSE BAD
    JMP GOOD
    LABEL BAD
    TRACE 'JMPFALSE: WRONG JMP'
    LABEL GOOD

    PUSHI TRUE
    JMPTRUE GOOD
    TRACE 'JMPTRUE: WRONG NO-JMP'
    LABEL GOOD

    PUSHI FALSE
    JMPTRUE BAD
    JMP GOOD
    LABEL BAD
    TRACE 'JMPTRUE: WRONG JMP'
    LABEL GOOD

    PUSHI NONE
    JMPTRUE BAD
    JMP GOOD
    LABEL BAD
    TRACE 'JMPTRUE: WRONG JMP'
    LABEL GOOD

    PUSHOBJ
    JMPTRUE BAD
    JMP GOOD
    LABEL BAD
    TRACE 'JMPTRUE: WRONG JMP'
    LABEL GOOD

    PUSHI NONE
    JMPNONE GOOD
    TRACE 'JMPNONE: WRONG NO-JMP'
    LABEL GOOD

    PUSHI TRUE
    JMPNONE BAD
    JMP GOOD
    LABEL BAD
    TRACE 'JMPNONE: WRONG JMP'
    LABEL GOOD

    PUSHI FALSE
    JMPNONE BAD
    JMP GOOD
    LABEL BAD
    TRACE 'JMPNONE: WRONG JMP'
    LABEL GOOD

    PUSHOBJ
    JMPNONE BAD
    JMP GOOD
    LABEL BAD
    TRACE 'JMPNONE: WRONG JMP'
    LABEL GOOD

    PUSHI 1e10
    JMPINT GOOD
    TRACE 'JMPINT: WRONG NO-JMP'
    LABEL GOOD

    PUSHI 2.5
    JMPINT BAD
    JMP GOOD
    LABEL BAD
    TRACE 'JMPINT: WRONG JMP'
    LABEL GOOD

    PUSHOBJ
    JMPINT BAD
    JMP GOOD
    LABEL BAD
    TRACE 'JMPINT: WRONG JMP'
    LABEL GOOD

    PUSHI 1
    JMPFIN GOOD
    TRACE 'JMPFIN: WRONG NO-JMP'
    LABEL GOOD

    PUSHI 1e600
    JMPFIN BAD
    JMP GOOD
    LABEL BAD
    TRACE 'JMPFIN: WRONG JMP'
    LABEL GOOD

    PUSHOBJ
    JMPFIN BAD
    JMP GOOD
    LABEL BAD
    TRACE 'JMPFIN: WRONG JMP'
    LABEL GOOD

    PUSHI 1e600
    JMPINF GOOD
    TRACE 'JMPINF: WRONG NO-JMP'
    LABEL GOOD

    PUSHI 1
    JMPINF BAD
    JMP GOOD
    LABEL BAD
    TRACE 'JMPINF: WRONG JMP'
    LABEL GOOD

    PUSHOBJ
    JMPINF BAD
    JMP GOOD
    LABEL BAD
    TRACE 'JMPINF: WRONG JMP'
    LABEL GOOD

    PUSHI nan
    JMPNAN GOOD
    TRACE 'JMPNAN: WRONG NO-JMP'
    LABEL GOOD

    PUSHI 1
    JMPNAN BAD
    JMP GOOD
    LABEL BAD
    TRACE 'JMPNAN: WRONG JMP'
    LABEL GOOD

    PUSHI +inf
    JMPNAN BAD
    JMP GOOD
    LABEL BAD
    TRACE 'JMPNAN: WRONG JMP'
    LABEL GOOD

    PUSHOBJ
    JMPNAN BAD
    JMP GOOD
    LABEL BAD
    TRACE 'JMPNAN: WRONG JMP'
    LABEL GOOD

    PUSHI 1e600
    JMPNUM GOOD
    TRACE 'JMPNUM: WRONG NO-JMP'
    LABEL GOOD

    PUSHI NAN
    JMPNUM GOOD
    TRACE 'JMPNUM: WRONG NO-JMP'
    LABEL GOOD

    PUSHI TRUE
    JMPNUM BAD
    JMP GOOD
    LABEL BAD
    TRACE 'JMPNUM: WRONG JMP'
    LABEL GOOD

    PUSHI TRUE
    JMPTRUTH GOOD
    TRACE 'JMPTRUTH: WRONG NO-JMP'
    LABEL GOOD

    PUSHI FALSE
    JMPTRUTH GOOD
    TRACE 'JMPTRUTH: WRONG NO-JMP'
    LABEL GOOD

    PUSHOBJ
    JMPTRUTH BAD
    JMP GOOD
    LABEL BAD
    TRACE 'JMPTRUTH: WRONG JMP'
    LABEL GOOD

    PUSHI NAN
    JMPTRUTH BAD
    JMP GOOD
    LABEL BAD
    TRACE 'JMPTRUTH: WRONG JMP'
    LABEL GOOD

    PUSHI "Hello"
    JMPSTR GOOD
    TRACE 'JMPSTR: WRONG NO-JMP'
    LABEL GOOD

    PUSHOBJ
    JMPSTR BAD
    JMP GOOD
    LABEL BAD
    TRACE 'JMPSTR: WRONG JMP'
    LABEL GOOD

    PUSHI NAN
    JMPSTR BAD
    JMP GOOD
    LABEL BAD
    TRACE 'JMPSTR: WRONG JMP'
    LABEL GOOD

    PUSHOBJ
    JMPOBJ GOOD
    TRACE 'JMPOBJ: WRONG NO-JMP'
    LABEL GOOD

    PUSHI "Hello"
    JMPOBJ BAD
    JMP GOOD
    LABEL BAD
    TRACE 'JMPOBJ: WRONG JMP'
    LABEL GOOD

    PUSHI NAN
    JMPOBJ BAD
    JMP GOOD
    LABEL BAD
    TRACE 'JMPOBJ: WRONG JMP'
    LABEL GOOD

    NOP 'Only Traced if Optimize is OFF'
ENDF

SET_OPTIMIZE OFF
CALL JMP-1ARG-TEST 0
SET_OPTIMIZE ON
CALL JMP-1ARG-TEST 0
